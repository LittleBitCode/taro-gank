import Taro, { Component } from '@tarojs/taro'
import { View, Text, Input, Picker, Button, Form } from '@tarojs/components'
import './style.less'

export default class Upload extends Component {

  config = {
    navigationBarTitleText: '提交干货'
  }

  constructor(props) {
    super(props);
    this.state = {
      userInfo: {},
      selector: ['Android', 'iOS', '休息视频', '福利', '拓展资源', '前端', '瞎推荐', 'App'],
      selectorChecked: 'Android',
    }
  }

  componentWillMount () { }

  componentDidMount () {
    const {userInfo} = this.$router.params;
    if(userInfo) {
      this.setState({
        userInfo : JSON.parse(userInfo)
      });
    }
  }

  componentWillUnmount () { }

  componentDidShow () { }

  componentDidHide () { }

  onChange = e => {
    this.setState({
      selectorChecked: this.state.selector[e.detail.value]
    })
  };

  handleSubmit = (errors, values) => {
    if(errors) return;
    console.log(values);
  };

  render () {
    const {userInfo} = this.state;
    return (
      <View className='collect'>
        <Form onSubmit={this.handleSubmit}>
          <View className='content'>
            <Form.Item>
              <View className='item-list'>
                <Text>描述</Text>
                <Input type='text' placeholder='请输入描述信息...' name='des' />
              </View>
            </Form.Item>
            <View className='item-list'>
              <Text>提交者</Text>
              <Input type='text' placeholder='请输入提交者姓名...' value={userInfo.nickName} name='submitter' />
            </View>
            <View className='item-list'>
              <Text>URL</Text>
              <Input type='text' placeholder='请输入 url 地址...' name='url' />
            </View>
            <View className='page-body item-list'>
              <View className='page-section'>
                <View>
                  <Picker mode='selector' range={this.state.selector} onChange={this.onChange} name='select'>
                    <View className='picker'>
                      <Text className='type'>类型</Text>
                      <Text className='checked'>{this.state.selectorChecked}</Text>
                    </View>
                  </Picker>
                </View>
              </View>
            </View>
          </View>
          <Button className='submit' type='primary' formType='submit'>提交干货</Button>
        </Form>
      </View>
    )
  }
}

